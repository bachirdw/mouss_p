 <!-- Ã‰tapes de test avec Postman
1. ðŸ” Inscription dâ€™un utilisateur
URL : POST http://localhost:8080/api/users/register
Body (JSON) :


Modifier
{
  "name": "Jean Dupont",
  "email": "jean@mail.com",
  "password": "secret123"
}
RÃ©sultat attendu :

Code 200 OK

Le JSON de l'utilisateur enregistrÃ© est retournÃ© (avec lâ€™ID, nom, email, rÃ´le "USER"...)

âœ… VÃ©rifie que lâ€™utilisateur est bien insÃ©rÃ© dans la base H2 (si tu actives la console).

2. ðŸ”‘ Connexion et rÃ©cupÃ©ration du JWT
URL : POST http://localhost:8080/api/auth/login
Body (JSON) :


{
  "email": "jean@mail.com",
  "password": "secret123"
}
RÃ©sultat attendu :

Code 200 OK

Un objet JSON contenant un champ token :


{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "email": "jean@mail.com",
  "role": "USER"
}
ðŸ“Œ Copie bien le token, tu vas lâ€™utiliser dans les appels suivants.

3. ðŸ”’ Appel dâ€™un endpoint protÃ©gÃ© sans token (âš ï¸)
URL : GET http://localhost:8080/api/vehicules (exemple d'endpoint protÃ©gÃ©)
Headers : Aucun

RÃ©sultat attendu :

Code 401 Unauthorized

Message dâ€™erreur "Full authentication is required to access this resource"

4. âœ… Appel du mÃªme endpoint AVEC le token JWT
URL : GET http://localhost:8080/api/vehicules
Headers :


Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6...
ðŸ’¡ Clique sur "Headers", ajoute :

ClÃ© : Authorization

Valeur : Bearer {token} (âš ï¸ bien mettre un espace aprÃ¨s Bearer)

RÃ©sultat attendu :

Code 200 OK

Liste des vÃ©hicules si ton endpoint retourne des donnÃ©es.

5. ðŸ›‘ Test dâ€™une requÃªte avec un token invalide
Reprends lâ€™Ã©tape 4 mais coupe le token ou change un caractÃ¨re :


Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
RÃ©sultat attendu :

Code 403 Forbidden ou 401 Unauthorized

Message dâ€™erreur (selon ton filtre JWT)

6. ðŸ” Test avec un utilisateur ayant le rÃ´le ADMIN
CrÃ©e un admin dans ta base (manuellement ou via data.sql)

Connecte-toi avec ses credentials

VÃ©rifie quâ€™il peut accÃ©der Ã  des routes rÃ©servÃ©es (ex : /api/admin/users)

Un utilisateur avec le rÃ´le "USER" ne doit PAS y avoir accÃ¨s (il reÃ§oit 403)

ðŸ” Astuces
Active les logs JWT cÃ´tÃ© Spring pour mieux comprendre si le token est bien dÃ©codÃ©.

Utilise le site https://jwt.io pour dÃ©coder visuellement un JWT.

Tu peux ajouter un "Environnement Postman" avec la variable {{token}} pour automatiser tes tests.
 -->
